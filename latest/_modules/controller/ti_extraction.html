

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>controller.ti_extraction &mdash; ROSE SRv6 Control Plane v0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> ROSE SRv6 Control Plane
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../controller/index.html">Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../node-manager/index.html">Node Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release/index.html">Release Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ROSE SRv6 Control Plane</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>controller.ti_extraction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for controller.ti_extraction</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/python</span>

<span class="c1">##########################################################################</span>
<span class="c1"># Copyright (C) 2020 Carmine Scarpitta</span>
<span class="c1"># (Consortium GARR and University of Rome &quot;Tor Vergata&quot;)</span>
<span class="c1"># www.garr.it - www.uniroma2.it/netgroup</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &#39;License&#39;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1"># http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="c1">#</span>
<span class="c1"># Topology information extraction</span>
<span class="c1">#</span>
<span class="c1"># @author Carmine Scarpitta &lt;carmine.scarpitta@uniroma2.it&gt;</span>
<span class="c1">#</span>


<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Topology Information Extraction utilities</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">errno</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">telnetlib</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentParser</span>

<span class="c1"># Logger reference</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># Optional imports:</span>
<span class="c1">#     NetworkX      - only required to export the topology in JSON format</span>
<span class="c1">#                     and to draw the topology</span>
<span class="c1">#     pyaml         - only required to export the topology in YAML format</span>
<span class="c1">#     pygraphviz    - only required to export the topology to an image file</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
    <span class="kn">from</span> <span class="nn">networkx.drawing.nx_agraph</span> <span class="kn">import</span> <span class="n">write_dot</span>
    <span class="kn">from</span> <span class="nn">networkx.readwrite</span> <span class="kn">import</span> <span class="n">json_graph</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;networkx library is not installed&#39;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">pyaml</span> <span class="kn">import</span> <span class="n">yaml</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;pyaml library is not installed&#39;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pygraphviz</span>  <span class="c1"># pylint: disable=unused-import # noqa: F401</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;pygraphviz library is not installed&#39;</span><span class="p">)</span>


<span class="c1"># Global variables definition</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># Default topology file</span>
<span class="n">DEFAULT_TOPOLOGY_FILE</span> <span class="o">=</span> <span class="s1">&#39;/tmp/topology.json&#39;</span>
<span class="c1"># Default nodes file</span>
<span class="n">DEFAULT_NODES_YAML_FILE</span> <span class="o">=</span> <span class="s1">&#39;/tmp/nodes.yaml&#39;</span>
<span class="c1"># Default edges file</span>
<span class="n">DEFAULT_EDGES_YAML_FILE</span> <span class="o">=</span> <span class="s1">&#39;/tmp/edges.yaml&#39;</span>
<span class="c1"># Interval between two consecutive extractions (in seconds)</span>
<span class="n">DEFAULT_TOPO_EXTRACTION_PERIOD</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># In our experiment we use &#39;zebra&#39; as default password</span>
<span class="n">DEFAULT_ISISD_PASSWORD</span> <span class="o">=</span> <span class="s1">&#39;zebra&#39;</span>
<span class="c1"># Dot file used to draw topology graph</span>
<span class="n">DOT_FILE_TOPO_GRAPH</span> <span class="o">=</span> <span class="s1">&#39;/tmp/topology.dot&#39;</span>
<span class="c1"># Define whether the verbose mode is enabled or not by default</span>
<span class="n">DEFAULT_VERBOSE</span> <span class="o">=</span> <span class="kc">False</span>


<span class="c1"># Utility function to dump relevant information of the topology</span>
<div class="viewcode-block" id="dump_topo_json"><a class="viewcode-back" href="../../controller/api/ti_extraction.html#controller.ti_extraction.dump_topo_json">[docs]</a><span class="k">def</span> <span class="nf">dump_topo_json</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">topo_file</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Dump the graph to a JSON file</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1">#</span>
    <span class="c1"># This function depends on the NetworkX library, which is a</span>
    <span class="c1"># optional dependency for this script</span>
    <span class="c1">#</span>
    <span class="c1"># Check if the NetworkX library has been imported</span>
    <span class="k">if</span> <span class="s1">&#39;networkx&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s1">&#39;NetworkX library required by dump_topo_json() &#39;</span>
                        <span class="s1">&#39;has not been imported. Is it installed?&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Export NetworkX object into a json file</span>
    <span class="c1"># Json dump of the topology</span>
    <span class="c1">#</span>
    <span class="c1"># Get json topology</span>
    <span class="n">json_topology</span> <span class="o">=</span> <span class="n">json_graph</span><span class="o">.</span><span class="n">node_link_data</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
    <span class="c1"># Convert links</span>
    <span class="n">json_topology</span><span class="p">[</span><span class="s1">&#39;links&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span>
        <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="n">link</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">],</span>
        <span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="n">link</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">],</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">json_topology</span><span class="p">[</span><span class="s1">&#39;links&#39;</span><span class="p">]]</span>
    <span class="c1"># Convert nodes</span>
    <span class="n">json_topology</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span>
        <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
        <span class="s1">&#39;ip_address&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">),</span>
        <span class="s1">&#39;ext_reachability&#39;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ext_reachability&#39;</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">json_topology</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">]]</span>
    <span class="c1"># Dump the topology</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;*** Exporting topology to </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">topo_file</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">topo_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">json_topology</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Topology exported</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="dump_topo_yaml"><a class="viewcode-back" href="../../controller/api/ti_extraction.html#controller.ti_extraction.dump_topo_yaml">[docs]</a><span class="k">def</span> <span class="nf">dump_topo_yaml</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">edges</span><span class="p">,</span> <span class="n">node_to_systemid</span><span class="p">,</span>
                   <span class="n">nodes_file_yaml</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">edges_file_yaml</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Dump the provided set of nodes and edges to a dict representation.</span>
<span class="sd">    Optionally, nodes and edges are exported as YAML file</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1">#</span>
    <span class="c1"># This function depends on the pyaml library, which is a</span>
    <span class="c1"># optional dependency for this script</span>
    <span class="c1">#</span>
    <span class="c1"># Check if the pyaml library has been imported</span>
    <span class="k">if</span> <span class="s1">&#39;pyaml&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s1">&#39;pyaml library required by dump_topo_yaml() &#39;</span>
                        <span class="s1">&#39;has not been imported. Is it installed?&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
    <span class="c1"># Export nodes in YAML format</span>
    <span class="n">nodes_yaml</span> <span class="o">=</span> <span class="p">[{</span>
        <span class="s1">&#39;_key&#39;</span><span class="p">:</span> <span class="n">node</span><span class="p">,</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;router&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ip_address&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;ext_reachability&#39;</span><span class="p">:</span> <span class="n">node_to_systemid</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
    <span class="p">}</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">]</span>
    <span class="c1"># Write nodes to file</span>
    <span class="k">if</span> <span class="n">nodes_file_yaml</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;*** Exporting topology nodes to </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">nodes_file_yaml</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">nodes_file_yaml</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">nodes_yaml</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
    <span class="c1"># Export edges in YAML format</span>
    <span class="c1"># Character &#39;/&#39; is not accepted in key strign in arango, using</span>
    <span class="c1"># &#39;-&#39; instead</span>
    <span class="n">edges_yaml</span> <span class="o">=</span> <span class="p">[{</span>
        <span class="s1">&#39;_key&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-dir1&#39;</span> <span class="o">%</span> <span class="n">edge</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">),</span>
        <span class="s1">&#39;_from&#39;</span><span class="p">:</span> <span class="s1">&#39;nodes/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="s1">&#39;_to&#39;</span><span class="p">:</span> <span class="s1">&#39;nodes/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;core&#39;</span>
    <span class="p">}</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">]</span> <span class="o">+</span> <span class="p">[{</span>
        <span class="s1">&#39;_key&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-dir2&#39;</span> <span class="o">%</span> <span class="n">edge</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">),</span>
        <span class="s1">&#39;_from&#39;</span><span class="p">:</span> <span class="s1">&#39;nodes/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="s1">&#39;_to&#39;</span><span class="p">:</span> <span class="s1">&#39;nodes/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;core&#39;</span>
    <span class="p">}</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">]</span>
    <span class="c1"># Write edges to file</span>
    <span class="k">if</span> <span class="n">edges_file_yaml</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;*** Exporting topology edges to </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">edges_file_yaml</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">edges_file_yaml</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">edges_yaml</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Topology exported</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">nodes_yaml</span><span class="p">,</span> <span class="n">edges_yaml</span></div>


<div class="viewcode-block" id="connect_telnet"><a class="viewcode-back" href="../../controller/api/ti_extraction.html#controller.ti_extraction.connect_telnet">[docs]</a><span class="k">def</span> <span class="nf">connect_telnet</span><span class="p">(</span><span class="n">router</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Establish a telnet connection to a router on a given port</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1">#</span>
    <span class="c1"># Establish a telnet connection to the router</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Init telnet</span>
        <span class="n">telnet_conn</span> <span class="o">=</span> <span class="n">telnetlib</span><span class="o">.</span><span class="n">Telnet</span><span class="p">(</span><span class="n">router</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="c1"># Connection established</span>
        <span class="k">return</span> <span class="n">telnet_conn</span>
    <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">:</span>
        <span class="c1"># Timeout expired</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Error: cannot establish a connection &#39;</span>
                      <span class="s1">&#39;to </span><span class="si">%s</span><span class="s1"> on port </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">router</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">port</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="c1"># Socket error</span>
        <span class="k">if</span> <span class="n">err</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">EINTR</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Error: cannot establish a connection &#39;</span>
                          <span class="s1">&#39;to </span><span class="si">%s</span><span class="s1"> on port </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">router</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">port</span><span class="p">))</span>
    <span class="k">return</span> <span class="kc">None</span></div>


<span class="c1"># Build NetworkX Topology graph</span>
<div class="viewcode-block" id="build_topo_graph"><a class="viewcode-back" href="../../controller/api/ti_extraction.html#controller.ti_extraction.build_topo_graph">[docs]</a><span class="k">def</span> <span class="nf">build_topo_graph</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">edges</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Convert nodes and edges to a NetworkX graph</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1">#</span>
    <span class="c1"># This function depends on the NetworkX library, which is a</span>
    <span class="c1"># optional dependency for this script</span>
    <span class="c1">#</span>
    <span class="c1"># Check if the NetworkX library has been imported</span>
    <span class="k">if</span> <span class="s1">&#39;networkx&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s1">&#39;NetworkX library required by build_topo_graph() &#39;</span>
                        <span class="s1">&#39;has not been imported. Is it installed?&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;*** Building topology graph&#39;</span><span class="p">)</span>
    <span class="c1"># Topology graph</span>
    <span class="n">graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="c1"># Add nodes to the graph</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="c1"># Add edges to the graph</span>
    <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="c1"># Return the networkx graph</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Graph builded successfully</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">graph</span></div>


<span class="c1"># Utility function to export the network graph as an image file</span>
<div class="viewcode-block" id="draw_topo"><a class="viewcode-back" href="../../controller/api/ti_extraction.html#controller.ti_extraction.draw_topo">[docs]</a><span class="k">def</span> <span class="nf">draw_topo</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">svg_topo_file</span><span class="p">,</span> <span class="n">dot_topo_file</span><span class="o">=</span><span class="n">DOT_FILE_TOPO_GRAPH</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Export the NetworkX graph to a SVG image</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1">#</span>
    <span class="c1"># This function depends on the NetworkX library, which is a</span>
    <span class="c1"># optional dependency for this script</span>
    <span class="c1">#</span>
    <span class="c1"># Check if the NetworkX library has been imported</span>
    <span class="k">if</span> <span class="s1">&#39;networkx&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s1">&#39;NetworkX library required by draw_topo() &#39;</span>
                        <span class="s1">&#39;has not been imported. Is it installed?&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="s1">&#39;pygraphviz&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s1">&#39;pygraphviz library required by dump_topo_yaml() &#39;</span>
                        <span class="s1">&#39;has not been imported. Is it installed?&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Create dot topology file, an intermediate representation</span>
    <span class="c1"># of the topology used to export as an image</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;*** Saving topology graph image to </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">svg_topo_file</span><span class="p">)</span>
    <span class="n">write_dot</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">dot_topo_file</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;dot -Tsvg </span><span class="si">%s</span><span class="s1"> -o </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dot_topo_file</span><span class="p">,</span> <span class="n">svg_topo_file</span><span class="p">))</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Topology exported</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="connect_and_extract_topology_isis"><a class="viewcode-back" href="../../controller/api/ti_extraction.html#controller.ti_extraction.connect_and_extract_topology_isis">[docs]</a><span class="k">def</span> <span class="nf">connect_and_extract_topology_isis</span><span class="p">(</span><span class="n">ips_ports</span><span class="p">,</span>
                                      <span class="n">isisd_pwd</span><span class="o">=</span><span class="n">DEFAULT_ISISD_PASSWORD</span><span class="p">,</span>
                                      <span class="n">verbose</span><span class="o">=</span><span class="n">DEFAULT_VERBOSE</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Establish a telnet connection to isisd process running on a router</span>
<span class="sd">    and extract the network topology from the router</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1">#</span>
    <span class="c1"># pylint: disable=too-many-branches, too-many-locals, too-many-statements</span>
    <span class="c1"># ISIS password</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">isisd_pwd</span>
    <span class="c1"># Let&#39;s parse the input</span>
    <span class="n">routers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">ports</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># First create the chunk</span>
    <span class="k">for</span> <span class="n">ip_port</span> <span class="ow">in</span> <span class="n">ips_ports</span><span class="p">:</span>
        <span class="c1"># Then parse the chunk</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">ip_port</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
        <span class="n">routers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">ports</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="c1"># Connect to a router and extract the topology</span>
    <span class="k">for</span> <span class="n">router</span><span class="p">,</span> <span class="n">port</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">routers</span><span class="p">,</span> <span class="n">ports</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">********* Connecting to </span><span class="si">%s</span><span class="s2">-</span><span class="si">%s</span><span class="s2"> *********&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">router</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
        <span class="c1"># Init telnet and try to establish a connection to the router</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">telnet_conn</span> <span class="o">=</span> <span class="n">telnetlib</span><span class="o">.</span><span class="n">Telnet</span><span class="p">(</span><span class="n">router</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: cannot establish a connection to &quot;</span> <span class="o">+</span>
                  <span class="nb">str</span><span class="p">(</span><span class="n">router</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; on port &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">port</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="c1">#</span>
        <span class="c1"># Extract router hostnames</span>
        <span class="c1">#</span>
        <span class="c1"># Insert isisd password</span>
        <span class="k">if</span> <span class="n">password</span><span class="p">:</span>
            <span class="n">telnet_conn</span><span class="o">.</span><span class="n">read_until</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;Password: &quot;</span><span class="p">)</span>
            <span class="n">telnet_conn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># terminal length set to 0 to not have interruptions</span>
            <span class="n">telnet_conn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;terminal length 0&quot;</span> <span class="o">+</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># Get routing info from isisd database</span>
            <span class="n">telnet_conn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;show isis hostname&quot;</span> <span class="o">+</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># Close</span>
            <span class="n">telnet_conn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;q&quot;</span> <span class="o">+</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># Get results</span>
            <span class="n">hostname_details</span> <span class="o">=</span> <span class="n">telnet_conn</span><span class="o">.</span><span class="n">read_all</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BrokenPipeError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Broken pipe. Is the password correct?&#39;</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># Close telnet</span>
            <span class="n">telnet_conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="c1">#</span>
        <span class="c1"># Extract router database</span>
        <span class="c1">#</span>
        <span class="c1"># Init telnet and try to establish a connection to the router</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">telnet_conn</span> <span class="o">=</span> <span class="n">telnetlib</span><span class="o">.</span><span class="n">Telnet</span><span class="p">(</span><span class="n">router</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: cannot establish a connection to &quot;</span> <span class="o">+</span>
                  <span class="nb">str</span><span class="p">(</span><span class="n">router</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; on port &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">port</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="c1"># Insert isisd password</span>
        <span class="k">if</span> <span class="n">password</span><span class="p">:</span>
            <span class="n">telnet_conn</span><span class="o">.</span><span class="n">read_until</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;Password: &quot;</span><span class="p">)</span>
            <span class="n">telnet_conn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># terminal length set to 0 to not have interruptions</span>
        <span class="n">telnet_conn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;terminal length 0&quot;</span> <span class="o">+</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># Get routing info from isisd database</span>
        <span class="n">telnet_conn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;show isis database detail&quot;</span> <span class="o">+</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># Close</span>
        <span class="n">telnet_conn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;q&quot;</span> <span class="o">+</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># Get results</span>
        <span class="n">database_details</span> <span class="o">=</span> <span class="n">telnet_conn</span><span class="o">.</span><span class="n">read_all</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="c1"># Close telnet</span>
        <span class="n">telnet_conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="c1"># Set of System IDs</span>
        <span class="n">system_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="c1"># Set of hostnames</span>
        <span class="n">hostnames</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="c1"># Mapping System ID to hostname</span>
        <span class="n">system_id_to_hostname</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="c1"># Mapping hostname to System ID</span>
        <span class="n">hostname_to_system_id</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="c1"># Process hostnames</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">hostname_details</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
            <span class="c1"># Get System ID and hostname</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;(</span><span class="se">\\</span><span class="s1">d+.</span><span class="se">\\</span><span class="s1">d+.</span><span class="se">\\</span><span class="s1">d+)</span><span class="se">\\</span><span class="s1">s+(</span><span class="se">\\</span><span class="s1">S+)&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="c1"># Extract System ID</span>
                <span class="n">system_id</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="c1"># Extract hostname</span>
                <span class="n">hostname</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                <span class="c1"># Update System IDs</span>
                <span class="n">system_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">system_id</span><span class="p">)</span>
                <span class="c1"># Update hostnames</span>
                <span class="n">hostnames</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">hostname</span><span class="p">)</span>
                <span class="c1"># Update mappings</span>
                <span class="n">system_id_to_hostname</span><span class="p">[</span><span class="n">system_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">hostname</span>
                <span class="n">hostname_to_system_id</span><span class="p">[</span><span class="n">hostname</span><span class="p">]</span> <span class="o">=</span> <span class="n">system_id</span>
        <span class="c1"># Mapping hostname to reachability</span>
        <span class="n">reachability_info</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="c1"># Process isis database</span>
        <span class="n">hostname</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># IPv6 subnet addresses of edges</span>
        <span class="n">ipv6_reachability</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">database_details</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
            <span class="c1"># Get hostname</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;Hostname: (</span><span class="se">\\</span><span class="s1">S+)&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="c1"># Extract hostname</span>
                <span class="n">hostname</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="c1"># Update reachability info dict</span>
                <span class="n">reachability_info</span><span class="p">[</span><span class="n">hostname</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="c1"># Get extended reachability</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
                <span class="s1">&#39;Extended Reachability: (</span><span class="se">\\</span><span class="s1">d+.</span><span class="se">\\</span><span class="s1">d+.</span><span class="se">\\</span><span class="s1">d+).</span><span class="se">\\</span><span class="s1">d+&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="c1"># Extract extended reachability info</span>
                <span class="n">reachability</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="c1"># Update reachability info dict</span>
                <span class="k">if</span> <span class="n">reachability</span> <span class="o">!=</span> <span class="n">hostname_to_system_id</span><span class="p">[</span><span class="n">hostname</span><span class="p">]:</span>
                    <span class="n">reachability_info</span><span class="p">[</span><span class="n">hostname</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">reachability</span><span class="p">)</span>
            <span class="c1">#   IPv6 Reachability: fcf0:0:6:8::/64 (Metric: 10)</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;IPv6 Reachability: (.+/</span><span class="se">\\</span><span class="s1">d{1,3})&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="n">ip_addr</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ip_addr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ipv6_reachability</span><span class="p">:</span>
                    <span class="c1"># Update IPv6 reachability dict</span>
                    <span class="n">ipv6_reachability</span><span class="p">[</span><span class="n">ip_addr</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
                <span class="c1"># add hostname to hosts list of the ip address in the ipv6</span>
                <span class="c1"># reachability dict</span>
                <span class="n">ipv6_reachability</span><span class="p">[</span><span class="n">ip_addr</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hostname</span><span class="p">)</span>
        <span class="c1"># Build the topology graph</span>
        <span class="c1">#</span>
        <span class="c1"># Nodes</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">hostnames</span>
        <span class="c1"># Edges</span>
        <span class="n">_edges</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="c1"># Edges with subnet IP address</span>
        <span class="n">edges</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">hostname</span><span class="p">,</span> <span class="n">system_ids</span> <span class="ow">in</span> <span class="n">reachability_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">system_id</span> <span class="ow">in</span> <span class="n">system_ids</span><span class="p">:</span>
                <span class="n">_edges</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">hostname</span><span class="p">,</span> <span class="n">system_id_to_hostname</span><span class="p">[</span><span class="n">system_id</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">ip_addr</span> <span class="ow">in</span> <span class="n">ipv6_reachability</span><span class="p">:</span>
            <span class="c1"># Edge link is bidirectional in this case</span>
            <span class="c1"># Only take IP addresses of links between 2 nodes</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ipv6_reachability</span><span class="p">[</span><span class="n">ip_addr</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="p">(</span><span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">)</span> <span class="o">=</span> <span class="n">ipv6_reachability</span><span class="p">[</span><span class="n">ip_addr</span><span class="p">]</span>
                <span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">,</span> <span class="n">ip_addr</span><span class="p">))</span>
                <span class="n">_edges</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">))</span>
                <span class="n">_edges</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">node2</span><span class="p">,</span> <span class="n">node1</span><span class="p">))</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">_edges</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
            <span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
            <span class="n">_edges</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">))</span>
            <span class="n">_edges</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">node2</span><span class="p">,</span> <span class="n">node1</span><span class="p">))</span>
        <span class="c1"># Print nodes and edges</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Topology extraction completed</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nodes:&quot;</span><span class="p">,</span> <span class="n">nodes</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Edges:&quot;</span><span class="p">,</span> <span class="n">edges</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;***************************************&quot;</span><span class="p">)</span>
        <span class="c1"># Return topology information</span>
        <span class="k">return</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">edges</span><span class="p">,</span> <span class="n">hostname_to_system_id</span>
    <span class="c1"># No router available to extract the topology</span>
    <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="topology_information_extraction_isis"><a class="viewcode-back" href="../../controller/api/ti_extraction.html#controller.ti_extraction.topology_information_extraction_isis">[docs]</a><span class="k">def</span> <span class="nf">topology_information_extraction_isis</span><span class="p">(</span><span class="n">routers</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">isisd_pwd</span><span class="p">,</span>
                                         <span class="n">topo_file_json</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">nodes_file_yaml</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">edges_file_yaml</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">topo_graph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">verbose</span><span class="o">=</span><span class="n">DEFAULT_VERBOSE</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Run Topology Information Extraction from a set of routers.</span>
<span class="sd">    Optionally export the topology to a JSON file, YAML file or SVG image</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1">#</span>
    <span class="c1"># pylint: disable=too-many-arguments</span>
    <span class="c1"># Topology Information Extraction</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># Extract the topology information</span>
        <span class="n">nodes</span><span class="p">,</span> <span class="n">edges</span><span class="p">,</span> <span class="n">node_to_systemid</span> <span class="o">=</span> \
            <span class="n">connect_and_extract_topology_isis</span><span class="p">(</span>
                <span class="n">routers</span><span class="p">,</span> <span class="n">isisd_pwd</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
        <span class="c1"># Build and export the topology graph</span>
        <span class="k">if</span> <span class="n">topo_file_json</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">topo_graph</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Builg topology graph</span>
            <span class="n">graph</span> <span class="o">=</span> <span class="n">build_topo_graph</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">edges</span><span class="p">)</span>
            <span class="c1"># Dump relevant information of the network graph to a JSON file</span>
            <span class="k">if</span> <span class="n">topo_file_json</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">dump_topo_json</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">topo_file_json</span><span class="p">)</span>
            <span class="c1"># Export the network graph as an image file</span>
            <span class="k">if</span> <span class="n">topo_graph</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">draw_topo</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">topo_graph</span><span class="p">)</span>
        <span class="c1"># Dump relevant information of the network graph to a YAML file</span>
        <span class="k">if</span> <span class="n">nodes_file_yaml</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">edges_file_yaml</span><span class="p">:</span>
            <span class="n">dump_topo_yaml</span><span class="p">(</span>
                <span class="n">nodes</span><span class="o">=</span><span class="n">nodes</span><span class="p">,</span>
                <span class="n">edges</span><span class="o">=</span><span class="n">edges</span><span class="p">,</span>
                <span class="n">node_to_systemid</span><span class="o">=</span><span class="n">node_to_systemid</span><span class="p">,</span>
                <span class="n">nodes_file_yaml</span><span class="o">=</span><span class="n">nodes_file_yaml</span><span class="p">,</span>
                <span class="n">edges_file_yaml</span><span class="o">=</span><span class="n">edges_file_yaml</span>
            <span class="p">)</span>
        <span class="c1"># Period = 0 means a single extraction</span>
        <span class="k">if</span> <span class="n">period</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="c1"># Wait &#39;period&#39; seconds between two extractions</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">period</span><span class="p">)</span></div>


<span class="c1"># Parse command line options and dump results</span>
<div class="viewcode-block" id="parse_arguments"><a class="viewcode-back" href="../../controller/api/ti_extraction.html#controller.ti_extraction.parse_arguments">[docs]</a><span class="k">def</span> <span class="nf">parse_arguments</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Command-line arguments parser</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1">#</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Topology Information Ex+traction (from ISIS) &#39;</span>
        <span class="s1">&#39;module for SRv6 Controller&#39;</span>
    <span class="p">)</span>
    <span class="c1"># ip:port of the routers</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-n&#39;</span><span class="p">,</span> <span class="s1">&#39;--node-ips&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Comma-separated &lt;ip-port&gt; pairs, where ip is the IP address of &#39;</span>
        <span class="s1">&#39;the router and port is the telnet port of the isisd daemon &#39;</span>
        <span class="s1">&#39;(e.g. 2000::1-2606,2000::2-2606,2000::3-2606)&#39;</span>
    <span class="p">)</span>
    <span class="c1"># Topology Information Extraction period</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-p&#39;</span><span class="p">,</span> <span class="s1">&#39;--period&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;period&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_TOPO_EXTRACTION_PERIOD</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Polling period &#39;</span>
        <span class="s1">&#39;(in seconds); a zero value means a single extraction&#39;</span>
    <span class="p">)</span>
    <span class="c1"># Path of topology file (JSON)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-t&#39;</span><span class="p">,</span> <span class="s1">&#39;--topology-json&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;topo_file_json&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_TOPOLOGY_FILE</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;JSON file of the extracted &#39;</span>
        <span class="s1">&#39;topology&#39;</span>
    <span class="p">)</span>
    <span class="c1"># Path of nodes file (YAML)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-r&#39;</span><span class="p">,</span> <span class="s1">&#39;--nodes-yaml&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;nodes_file_yaml&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_NODES_YAML_FILE</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;YAML file of the nodes extracted from the topology&#39;</span>
    <span class="p">)</span>
    <span class="c1"># Path of edges file (YAML)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-e&#39;</span><span class="p">,</span> <span class="s1">&#39;--edges-yaml&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;edges_file_yaml&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_EDGES_YAML_FILE</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;JSON file of the edges extracted from the topology&#39;</span>
    <span class="p">)</span>
    <span class="c1"># Path of topology graph</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-g&#39;</span><span class="p">,</span> <span class="s1">&#39;--topo-graph&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;topo_graph&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Image file of the exported NetworkX graph&#39;</span>
    <span class="p">)</span>
    <span class="c1"># Password used to log in to isisd daemon</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-w&#39;</span><span class="p">,</span> <span class="s1">&#39;--password&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_ISISD_PASSWORD</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Password of the isisd daemon&#39;</span>
    <span class="p">)</span>
    <span class="c1"># Debug logs</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s1">&#39;--debug&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Activate debug logs&#39;</span>
    <span class="p">)</span>
    <span class="c1"># Verbose mode</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="s1">&#39;--verbose&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;verbose&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_VERBOSE</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Enable verbose mode&#39;</span>
    <span class="p">)</span>
    <span class="c1"># Parse input parameters</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="c1"># Done, return</span>
    <span class="k">return</span> <span class="n">args</span></div>


<span class="k">def</span> <span class="nf">__main</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Entry point for this module</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1">#</span>
    <span class="c1"># Let&#39;s parse input parameters</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parse_arguments</span><span class="p">()</span>
    <span class="c1"># Setup properly the logger</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="c1"># Debug settings</span>
    <span class="n">server_debug</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">getEffectiveLevel</span><span class="p">()</span> <span class="o">==</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;SERVER_DEBUG: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">server_debug</span><span class="p">))</span>
    <span class="c1"># Get topology filename JSON</span>
    <span class="n">topo_file_json</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">topo_file_json</span>
    <span class="c1"># Get nodes filename YAML</span>
    <span class="n">nodes_file_yaml</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">nodes_file_yaml</span>
    <span class="c1"># Get edges filename YAML</span>
    <span class="n">edges_file_yaml</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">edges_file_yaml</span>
    <span class="c1"># Get topology graph image filename</span>
    <span class="n">topo_graph</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">topo_graph</span>
    <span class="k">if</span> <span class="n">topo_graph</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
            <span class="ow">not</span> <span class="n">topo_graph</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.svg&#39;</span><span class="p">):</span>
        <span class="c1"># Add file extension</span>
        <span class="n">topo_graph</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">topo_graph</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">)</span>
    <span class="c1"># Nodes</span>
    <span class="n">nodes</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">nodes</span>
    <span class="n">nodes</span> <span class="o">=</span> <span class="n">nodes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="c1"># Get period between two extractions</span>
    <span class="n">period</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">period</span>
    <span class="c1"># Verbose mode</span>
    <span class="n">verbose</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span>
    <span class="c1"># isisd password</span>
    <span class="n">pwd</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">password</span>
    <span class="c1"># Extract topology and build network graph</span>
    <span class="n">topology_information_extraction_isis</span><span class="p">(</span>
        <span class="n">routers</span><span class="o">=</span><span class="n">nodes</span><span class="p">,</span>
        <span class="n">period</span><span class="o">=</span><span class="n">period</span><span class="p">,</span>
        <span class="n">isisd_pwd</span><span class="o">=</span><span class="n">pwd</span><span class="p">,</span>
        <span class="n">topo_file_json</span><span class="o">=</span><span class="n">topo_file_json</span><span class="p">,</span>
        <span class="n">nodes_file_yaml</span><span class="o">=</span><span class="n">nodes_file_yaml</span><span class="p">,</span>
        <span class="n">edges_file_yaml</span><span class="o">=</span><span class="n">edges_file_yaml</span><span class="p">,</span>
        <span class="n">topo_graph</span><span class="o">=</span><span class="n">topo_graph</span><span class="p">,</span>
        <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span>
    <span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">__main</span><span class="p">()</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Carmine Scarpitta

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>